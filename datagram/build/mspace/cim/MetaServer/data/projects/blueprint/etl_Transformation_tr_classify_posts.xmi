<?xml version="1.0" encoding="ASCII"?>
<etl:Transformation xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:etl="http://www.neoflex.ru/meta/etl" name="tr_classify_posts" label="tr_classify_posts" sparkVersion="SPARK3" description="&#x41f;&#x440;&#x438;&#x43c;&#x435;&#x440; &#x438;&#x441;&#x43f;&#x43e;&#x43b;&#x44c;&#x437;&#x43e;&#x432;&#x430;&#x43d;&#x438;&#x44f; Drools.&#xA;&#x412;&#x445;&#x43e;&#x434;&#x44f;&#x449;&#x438;&#x435; &#x43f;&#x440;&#x43e;&#x432;&#x43e;&#x434;&#x43a;&#x438; &#x43a;&#x43b;&#x430;&#x441;&#x441;&#x438;&#x444;&#x438;&#x446;&#x438;&#x440;&#x443;&#x44e;&#x442;&#x441;&#x44f; &#x441;&#x442;&#x430;&#x442;&#x44c;&#x451;&#x439; &#x441; &#x43f;&#x43e;&#x43c;&#x43e;&#x449;&#x44c;&#x44e; &#x43f;&#x440;&#x430;&#x432;&#x438;&#x43b; &#x432; XLS &#x444;&#x430;&#x439;&#x43b;&#x435;.&#xA;&#x420;&#x435;&#x437;&#x443;&#x43b;&#x44c;&#x442;&#x430;&#x442; &#x43a;&#x43b;&#x430;&#x441;&#x441;&#x438;&#x444;&#x438;&#x43a;&#x430;&#x446;&#x438;&#x438; &#x437;&#x430;&#x43f;&#x438;&#x441;&#x44b;&#x432;&#x430;&#x435;&#x442;&#x441;&#x44f; &#x432; &#x432;&#x438;&#x434;&#x435; XLS &#x444;&#x430;&#x439;&#x43b;&#x430;." jsonView="{&quot;cells&quot;:[{&quot;type&quot;:&quot;devs.transformation.ExpressionSource&quot;,&quot;size&quot;:{&quot;width&quot;:80,&quot;height&quot;:80},&quot;inPorts&quot;:[],&quot;outPorts&quot;:[&quot;out&quot;],&quot;ports&quot;:{&quot;groups&quot;:{&quot;in&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;left&quot;},&quot;attrs&quot;:{&quot;.port-body&quot;:{&quot;fill&quot;:&quot;white&quot;,&quot;magnet&quot;:&quot;passive&quot;,&quot;stroke&quot;:&quot;#000&quot;,&quot;r&quot;:10},&quot;.port-label&quot;:{&quot;text&quot;:&quot;&quot;,&quot;visibility&quot;:&quot;hidden&quot;,&quot;fill&quot;:&quot;#000&quot;},&quot;circle&quot;:{&quot;r&quot;:7,&quot;stroke&quot;:&quot;#4d4d4dde&quot;,&quot;stroke-width&quot;:1}},&quot;label&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;left&quot;,&quot;args&quot;:{&quot;y&quot;:10}}}},&quot;out&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;right&quot;},&quot;label&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;right&quot;,&quot;args&quot;:{&quot;y&quot;:10}}},&quot;attrs&quot;:{&quot;.port-body&quot;:{&quot;fill&quot;:&quot;#4d4d4dde&quot;,&quot;stroke&quot;:&quot;#000&quot;,&quot;r&quot;:10,&quot;magnet&quot;:true},&quot;.port-label&quot;:{&quot;text&quot;:&quot;&quot;,&quot;visibility&quot;:&quot;hidden&quot;,&quot;fill&quot;:&quot;#000&quot;},&quot;circle&quot;:{&quot;r&quot;:7,&quot;stroke&quot;:&quot;#4d4d4dde&quot;,&quot;stroke-width&quot;:1}}}},&quot;items&quot;:[{&quot;id&quot;:&quot;out&quot;,&quot;group&quot;:&quot;out&quot;,&quot;attrs&quot;:{&quot;.port-label&quot;:{&quot;text&quot;:&quot;out&quot;}}}]},&quot;position&quot;:{&quot;x&quot;:33,&quot;y&quot;:149},&quot;angle&quot;:0,&quot;id&quot;:&quot;d2d7d3d9-e82f-4007-92b5-1b4cb412021c&quot;,&quot;name&quot;:&quot;Expression_0&quot;,&quot;z&quot;:1,&quot;attrs&quot;:{&quot;.label&quot;:{&quot;text&quot;:&quot;Expression_0&quot;}}},{&quot;type&quot;:&quot;devs.transformation.drools&quot;,&quot;size&quot;:{&quot;width&quot;:80,&quot;height&quot;:80},&quot;inPorts&quot;:[&quot;in&quot;],&quot;outPorts&quot;:[&quot;out&quot;],&quot;ports&quot;:{&quot;groups&quot;:{&quot;in&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;left&quot;},&quot;attrs&quot;:{&quot;.port-body&quot;:{&quot;fill&quot;:&quot;white&quot;,&quot;magnet&quot;:&quot;passive&quot;,&quot;stroke&quot;:&quot;#000&quot;,&quot;r&quot;:10},&quot;.port-label&quot;:{&quot;text&quot;:&quot;&quot;,&quot;visibility&quot;:&quot;hidden&quot;,&quot;fill&quot;:&quot;#000&quot;},&quot;circle&quot;:{&quot;r&quot;:7,&quot;stroke&quot;:&quot;#4d4d4dde&quot;,&quot;stroke-width&quot;:1}},&quot;label&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;left&quot;,&quot;args&quot;:{&quot;y&quot;:10}}}},&quot;out&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;right&quot;},&quot;label&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;right&quot;,&quot;args&quot;:{&quot;y&quot;:10}}},&quot;attrs&quot;:{&quot;.port-body&quot;:{&quot;fill&quot;:&quot;#4d4d4dde&quot;,&quot;stroke&quot;:&quot;#000&quot;,&quot;r&quot;:10,&quot;magnet&quot;:true},&quot;.port-label&quot;:{&quot;text&quot;:&quot;&quot;,&quot;visibility&quot;:&quot;hidden&quot;,&quot;fill&quot;:&quot;#000&quot;},&quot;circle&quot;:{&quot;r&quot;:7,&quot;stroke&quot;:&quot;#4d4d4dde&quot;,&quot;stroke-width&quot;:1}}}},&quot;items&quot;:[{&quot;id&quot;:&quot;in&quot;,&quot;group&quot;:&quot;in&quot;,&quot;attrs&quot;:{&quot;.port-label&quot;:{&quot;text&quot;:&quot;in&quot;}}},{&quot;id&quot;:&quot;out&quot;,&quot;group&quot;:&quot;out&quot;,&quot;attrs&quot;:{&quot;.port-label&quot;:{&quot;text&quot;:&quot;out&quot;}}}]},&quot;position&quot;:{&quot;x&quot;:270,&quot;y&quot;:150},&quot;angle&quot;:0,&quot;id&quot;:&quot;fb29ca6c-17a6-4897-8282-cda3a481f0ec&quot;,&quot;name&quot;:&quot;Drools_1&quot;,&quot;z&quot;:2,&quot;attrs&quot;:{&quot;.label&quot;:{&quot;text&quot;:&quot;Drools_1&quot;}}},{&quot;type&quot;:&quot;devs.transformation.CSVTarget&quot;,&quot;size&quot;:{&quot;width&quot;:80,&quot;height&quot;:80},&quot;inPorts&quot;:[&quot;in&quot;],&quot;outPorts&quot;:[],&quot;ports&quot;:{&quot;groups&quot;:{&quot;in&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;left&quot;},&quot;attrs&quot;:{&quot;.port-body&quot;:{&quot;fill&quot;:&quot;white&quot;,&quot;magnet&quot;:&quot;passive&quot;,&quot;stroke&quot;:&quot;#000&quot;,&quot;r&quot;:10},&quot;.port-label&quot;:{&quot;text&quot;:&quot;&quot;,&quot;visibility&quot;:&quot;hidden&quot;,&quot;fill&quot;:&quot;#000&quot;},&quot;circle&quot;:{&quot;r&quot;:7,&quot;stroke&quot;:&quot;#4d4d4dde&quot;,&quot;stroke-width&quot;:1}},&quot;label&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;left&quot;,&quot;args&quot;:{&quot;y&quot;:10}}}},&quot;out&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;right&quot;},&quot;label&quot;:{&quot;position&quot;:{&quot;name&quot;:&quot;right&quot;,&quot;args&quot;:{&quot;y&quot;:10}}},&quot;attrs&quot;:{&quot;.port-body&quot;:{&quot;fill&quot;:&quot;#4d4d4dde&quot;,&quot;stroke&quot;:&quot;#000&quot;,&quot;r&quot;:10,&quot;magnet&quot;:true},&quot;.port-label&quot;:{&quot;text&quot;:&quot;&quot;,&quot;visibility&quot;:&quot;hidden&quot;,&quot;fill&quot;:&quot;#000&quot;},&quot;circle&quot;:{&quot;r&quot;:7,&quot;stroke&quot;:&quot;#4d4d4dde&quot;,&quot;stroke-width&quot;:1}}}},&quot;items&quot;:[{&quot;id&quot;:&quot;in&quot;,&quot;group&quot;:&quot;in&quot;,&quot;attrs&quot;:{&quot;.port-label&quot;:{&quot;text&quot;:&quot;in&quot;}}}]},&quot;position&quot;:{&quot;x&quot;:510,&quot;y&quot;:150},&quot;angle&quot;:0,&quot;id&quot;:&quot;8a1c939f-3f6c-422c-b2ab-7c799b494c80&quot;,&quot;name&quot;:&quot;CSV_3&quot;,&quot;z&quot;:3,&quot;attrs&quot;:{&quot;.label&quot;:{&quot;text&quot;:&quot;CSV_3&quot;}}},{&quot;type&quot;:&quot;devs.transformation.Flow&quot;,&quot;source&quot;:{&quot;id&quot;:&quot;d2d7d3d9-e82f-4007-92b5-1b4cb412021c&quot;,&quot;port&quot;:&quot;out&quot;},&quot;target&quot;:{&quot;id&quot;:&quot;fb29ca6c-17a6-4897-8282-cda3a481f0ec&quot;,&quot;port&quot;:&quot;in&quot;},&quot;id&quot;:&quot;37870b39-bac6-47b4-872a-2e936c962191&quot;,&quot;z&quot;:5,&quot;attrs&quot;:{}},{&quot;type&quot;:&quot;devs.transformation.Flow&quot;,&quot;source&quot;:{&quot;id&quot;:&quot;fb29ca6c-17a6-4897-8282-cda3a481f0ec&quot;,&quot;port&quot;:&quot;out&quot;},&quot;target&quot;:{&quot;id&quot;:&quot;8a1c939f-3f6c-422c-b2ab-7c799b494c80&quot;,&quot;port&quot;:&quot;in&quot;},&quot;id&quot;:&quot;5ea75d63-eae9-4d47-9bd0-e24d6736cd47&quot;,&quot;z&quot;:6,&quot;attrs&quot;:{}}]}">
  <targets xsi:type="etl:CSVTarget" name="CSV_3" label="CSV_3" csvFormat="EXCEL" path="/tmp/drools_out.xls" header="true" quote="&quot;" escape="\">
    <inputPort name="CSV_3in">
      <fields name="id" dataTypeDomain="DECIMAL"/>
      <fields name="debit" dataTypeDomain="STRING"/>
      <fields name="credit" dataTypeDomain="STRING"/>
      <fields name="amount" dataTypeDomain="DECIMAL"/>
      <fields name="charter" dataTypeDomain="STRING"/>
    </inputPort>
  </targets>
  <transformationSteps xsi:type="etl:Drools" name="Drools_1" label="Drools_1" inputFactTypeName="ru.neoflex.rules.Record" resultFactTypeName="ru.neoflex.rules.Record" resultQueryName="getResult" resultFactName="result">
    <outputPort name="Drools_1out">
      <fields name="id" dataTypeDomain="DECIMAL"/>
      <fields name="debit" dataTypeDomain="STRING"/>
      <fields name="credit" dataTypeDomain="STRING"/>
      <fields name="amount" dataTypeDomain="DECIMAL"/>
      <fields name="charter" dataTypeDomain="STRING"/>
    </outputPort>
    <inputPort name="Drools_1in">
      <fields name="id" dataTypeDomain="DECIMAL"/>
      <fields name="debit" dataTypeDomain="STRING"/>
      <fields name="credit" dataTypeDomain="STRING"/>
      <fields name="amount" dataTypeDomain="DECIMAL"/>
    </inputPort>
    <rulesFiles fileUrl="/samples/classify.drl"/>
    <rulesFiles fileUrl="/samples/classify.xls" fileType="XLS"/>
  </transformationSteps>
  <sources xsi:type="etl:ExpressionSource" name="Expression_0" label="Expression_0" expression="Array(&#xA;    Map(&quot;id&quot; -> new java.math.BigDecimal(1), &quot;debit&quot; -> &quot;1&quot;, &quot;credit&quot; -> &quot;2&quot;, &quot;amount&quot; -> new java.math.BigDecimal(&quot;100&quot;)),&#xA;    Map(&quot;id&quot; -> new java.math.BigDecimal(1), &quot;debit&quot; -> &quot;2&quot;, &quot;credit&quot; -> &quot;3&quot;, &quot;amount&quot; -> new java.math.BigDecimal(&quot;200&quot;)),&#xA;    Map(&quot;id&quot; -> new java.math.BigDecimal(2), &quot;debit&quot; -> &quot;3&quot;, &quot;credit&quot; -> &quot;1&quot;, &quot;amount&quot; -> new java.math.BigDecimal(&quot;300&quot;)) &#xA;)">
    <outputPort name="Expression_0out">
      <fields name="id" dataTypeDomain="DECIMAL"/>
      <fields name="debit" dataTypeDomain="STRING"/>
      <fields name="credit" dataTypeDomain="STRING"/>
      <fields name="amount" dataTypeDomain="DECIMAL"/>
    </outputPort>
  </sources>
  <transitions name="af5226b2-3a50-47d1-a2fb-cc7624247eb0" start="//@sources.0/@outputPort" finish="//@transformationSteps.0/@inputPort"/>
  <transitions name="b4d84526-ecab-4399-af3f-71db59bdc3a3" start="//@transformationSteps.0/@outputPort" finish="//@targets.0/@inputPort"/>
  <auditInfo changeUser="admin" changeDateTime="2021-09-03T09:44:20.824+0000" createUser="admin" createDateTime="2021-02-02T01:24:48.906+0000"/>
</etl:Transformation>
